#include <HCSR04.h>
#include <Servo.h>

Servo myServo;  // create a servo object

HCSR04 hc(5, 6); //initialisation class HCSR04 (trig pin , echo pin)

int ledPinVd = 8;
int ledPinAm = 9;
int ledPinVe = 10;

const int distmin = 10;
const int distmax = 15;


void setup()
{ Serial.begin(9600);
  pinMode(ledPinVd, OUTPUT); //PINO VERDE
  pinMode(ledPinAm, OUTPUT); // PINO AMARELO
  pinMode(ledPinVe, OUTPUT); // PINO VERMELHO
  myServo.attach(3); // attaches the servo on pin 3 to the servo object
} 


void loop()
{

  Serial.println( hc.dist() );
  delay(600);
  
  int distancia = hc.dist();
  int volume = map(distancia, distmin, distmax, 0, 2);

  switch (volume) {
    case 0:    
      digitalWrite(ledPinVd, LOW);
      digitalWrite(ledPinAm, LOW);
      digitalWrite(ledPinVe, HIGH);
      break;

    case 1:
      digitalWrite(ledPinVd, LOW);
      digitalWrite(ledPinAm, HIGH);
      digitalWrite(ledPinVe, LOW);
      break;

    case 2:
      digitalWrite(ledPinVd, HIGH);
      digitalWrite(ledPinAm, LOW);
      digitalWrite(ledPinVe, LOW);
      break;
  }
  
   int angulo = analogRead(0); // lendo o potenciometro
   angulo = map(angulo, 0, 1023, 0, 180); // mapeando o angulo
   myServo.write(angulo); // aplicando o angulo ao servomotor
   delay(20);
}
